# CelestiaNote -セレスティアノート-
### by SnailPop


## 概要

**CelestiaNote -セレスティアノート-**は、Three.jsとTextAlive App APIを用いたインタラクティブな星空音楽ビジュアライザーです。
ユーザーが選んだ楽曲の歌詞が夜空の星のように輝き、星座を形成します。ユーザーの操作によって、星空が少しずつ"育って"いく、音楽と歌詞の幻想的な体験が楽しめます。

## アプリケーションの流れ

### 1.初期表示
- 星空とステージが表示され、ユーザーは自由に視点操作、移動することができます。
- マイクスタンドをクリックすると、その上にホログラム風の楽曲選択UIが出現します。

### 2.楽曲選択
- 左右の矢印で曲を切り替え、再生ボタンで曲の再生が開始されます。
- 再生中はシークバーによって再生位置の変更も可能です。
- 課題曲すべてに対応しています。また、Songleに音楽地図、TextAlive App APIに歌詞情報が登録された曲に対応できます。

### 3.望遠鏡での星空観察シーンへ
- 曲を選択した後、望遠鏡をクリックすると、望遠鏡での星空観察シーンに遷移します。
- タイミングに合わせて、歌詞が星の集まりとして出現します。
- 星空の中に隠された星座たちを、歌詞表示時に示されるヒントを用いて探し出します。
- 隠された星座の位置に歌詞を表示することができたら、星座が現れ、画面が変化していきます。

### 4.星空の観賞シーンへ
- 曲の終了後、ユーザーが自ら創り出した星空を観賞できるシーンに遷移します。
- 曲はループ再生され、星空観察シーンで表示した歌詞が、同じタイミング、同じ座標で再表示され、再び星座に戻ります。
- 星座の発見数は記録され、アンプをクリックするとリザルトを見ることができます。
- 星座の発見数が多いほど、画面が豪華になります。


## 特徴

- **視点操作・移動：** WASD/十字キーで移動が、マウス左クリック＆ドラッグで視点回転ができます。
- **星空のレンダリング：** Three.jsによってリアルタイムな星空描画を行っています。
- **歌詞の星化表現：** TextAlive APIと連携した歌詞が、星の粒子となって歌詞タイミングで出現します。
- **星座の探索：** ランダムに指定された位置に歌詞を表示できると、星座が生成されます。生成された個数によって演出が変わります。
- **UI表現：** CSSRendererで3D空間にホログラムUIを実装しています。（曲選択・誘導メッセージなど）
- **アニメーション演出：** GSAPによる、カメラや星の動きの滑らかなアニメーションを実装しています。

## 使用技術

- JavaScript (ES6 Modules)  
- [Three.js](https://threejs.org)：3Dシーンの構築・レンダリング
- [TextAlive App API](https://developer.textalive.jp/)：歌詞データと音楽再生の制御
- [GSAP](https://gsap.com/)：アニメーション制御
- [Webpack](https://webpack.js.org/)：モジュールバンドル・ビルド管理 
- [CSS3DRenderer](https://threejs.org/docs/#examples/en/renderers/CSS3DRenderer)：HTMLベースのUIを3D空間に配置

## 動作環境

PCでの閲覧を推奨
- GPU搭載PC推奨（スマホは非対応）
- Google Chrome（最新版推奨）
- Node.Js v16以上（推奨）

## インストールと起動

### 1.リポジトリをクローンまたはZIPでダウンロード
```sh
git clone https://github.com/Snail365/CelestiaNote.git
cd CelestiaNote
```

### 2.依存パッケージのインストール
```sh
npm install
```

### 3.ビルド
```sh
npm run build
```

### 4.本番用ローカルサーバ起動（別途 serve 等が必要）
```sh
npx serve dist
```

### 開発用に起動する場合

webpack.config.js の以下の設定を編集

```sh
// devtool: false,
mode: 'development'
```

その後、npm run build → npm startで確認可能

## ファイル内容

- src/ -- ソースコード(JavaScript, CSS, HTMLテンプレート、モデルなど)
- dist/ -- ビルド成果物（デプロイ用）
- webpack.config.js -- Webpack設定
- package.json -- 依存管理とスクリプト

## ライセンス

使用ライブラリ（Three.js, TextAlive App APIなど）は各ライセンスに準拠します。
3Dモデル、テクスチャ、画像ファイルはすべて自作です。